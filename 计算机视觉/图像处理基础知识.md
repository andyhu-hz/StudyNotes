# 图像处理基础知识                


## 光   

* 光的强度和单色光的灰度级    

这两个东西本质上都是描述光的强度，但是比较特殊的是没有颜色的光，我们称为单色光或无色光，单色光的属性就是它的光强。单色光形成的图像我们俗称为黑白图像，强度就是从黑到灰，再到白，灰度级用来描述单色光的强度，在后面的学习中，从黑到白的单色光的度量值范围称为灰度级，单色图像被称为灰度图像。          


## 简单的图像形成模型    

我们所看到的图像都是由"照射"源和形成图像的"场景"元素对光能的反射或吸收而产生的。      
我们使用形如`f(x,y)`的二维函数表示图像，在空间坐标`(x,y)`处，f的值应该是一个正标量，其物理意义由照射源决定(可见光、伽马射线、x射线等等),**当图像有物理过程产生时，其亮度值正比于照射源，所以，`f(x,y)`一定是非零有限的**，但是在图像处理的过程中，图像灰度总会不可避免的出现负值，为了解决这个问题，在存储和显示图像时，我们会标定灰度，以便最小的负值变为0.  

* 数字图像获取的过程:    

能量(“照射”)源  ->  场景元素  ->   成像系统   ->   场景到图像平面的投影   ->   数字化图像     

上面提到我们使用函数`f(x,y)`来表示图像，该函数可以由两个分量来表述，(1)入射到场景元素的光源照射总量；(2)场景中物体反射的光照总量，简称为入射分量和反射分量，表示为`i(x,y)`和`r(x,y)`，两个函数的乘积合并形成`f(x,y)`，`f(x,y) = i(x,y) * r(x,y)`        

其中：       
``` 
			0 < i(x,y) < ∞              
			0 < r(x,y) < 1(表示场景中物体的全吸收和全反射)            
```


## 图像的取样和量化    

前面说了一幅图像可以看作就是一个函数f，为了将图像数字化方便计算机存储和科学运算，我们需要对每个坐标点进行处理，对具体像素的位置、坐标的数字化称为取样，对其灰度级的数字化称为量化。      

![取样和量化](../../image/quyanglianghua.png)       

可以看到先对图像中的一行进行了像素提取，在底部以很小的间隔进行坐标分化，在侧面则是提供了8个离散灰度区域，然后将具体的灰度值划分到这8个离散区域内，这就是取样和量化的过程。     

![取样和量化结果](../../image/quyanglianghuaresult.png)       

上图的对比可以反映出数字图像的质量很大程度上取决于取样和量化中所用的样本数和灰度级。      

## 数字图像的表示     


我们可以将数字图像取样量化成为一个二维阵列(矩阵)，包括M行N列，这样`(x,y)`就是每个离散坐标，我们假定离散坐标使用整数值，那么`x = 0,1,2...M-1,y = 0,1,2...N-1`,这样数字图像f位于原点的函数值就是f(0,0),第一行的第二个样本点的值就是f(0,1)。x,y称为空间变量或空间坐标。       

常见有三种方法来表示      

* 1.三坐标表示法      
用两个坐标x，y来决定空间位置，第三个坐标表示当前位置的灰度值，这样的一幅图像就被立体的表示出来了。     

* 2.归一化表示     
图像中只有三个等间距的灰度值，将所有的灰度值归一化到`[0,1]`中，那么图像中每个点的灰度都有0，0.5,或1这样的值，在屏幕上就对应的显示出黑、灰、白的图像。      

* 3.阵列表示法    
将f(x,y)按照矩阵的方式记录下来，数值阵列用于处理和算法开发。      







## 几何基元和变换           

* 齐次坐标        

齐次坐标是相对于笛卡尔坐标而言的，我们平时所说的坐标系都是笛卡尔坐标系，表示的是笛卡尔空间，在这个空间内，两条直线是不能相交的，但是在透视空间里，情况就不一样了，什么叫透视空间，生活中，一条很长的马路，马路两边是平行的，你从马路一端向另一端看，马路在你视野的尽头会相交于一点，如果这时使用笛卡尔坐标表示就是(∞，∞)，这在透视空间内就没有意义，所以引进齐次坐标。         


齐次坐标就是使用n+1维来代替n维,我们可以在2D坐标后面加上一个额外的坐标w形成2D齐次坐标     


比如一个点的坐标为(X,Y),它的齐次坐标为(x,y,w)    


```
X = x/w  
Y = y/w
```    


这样，笛卡尔坐标系下(1,2)的齐次坐标就是(1,2,1),当把这个点移动到无限远处，它的齐次坐标就是(1,2,0)，而不是没有意义的(∞，∞)。   


将齐次坐标转换为非齐次也很简单         
通过除以最后一个元素转换
(1,2,1)
```
(1/1,2/1,1) = (1,2)
```            



## 像素        

* 亚像素           

现代摄像机都是以像素为最小单位，摄像机进行拍摄时，将物理世界中连续的图像进行了离散化处理，到成像面的每个像素点上只代表其附近的颜色，比这个附近还小的就是亚像素，亚像素是实际存在的，只是现在还无法通过硬件检测出来，我们只能进行近似的计算。        
